<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        @font-face {
            font-family: 'RixXladywatermelonR';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-4@1.0/RixXladywatermelonR.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            user-select: none;
            overflow: hidden;
        }

        body {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            background-image: url("12_Q.png");
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            height: 100vh;
            position: relative;
        }

        .text-container {
            position: absolute;
            top: 5%;
            right: 10%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px 17px;
            border-radius: 50px;
            cursor: pointer;
        }

        .text {
            font-family: 'RixXladywatermelonR';
            font-size: 20px;
            color: rgb(255, 255, 255);
            text-align: center;
            user-select: none;
        }

        .tooltip {
            display: none;
            position: absolute;
            top: 140%;
            left: 40%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 10px;
            font-size: 20px;
            font-family: 'RixXladywatermelonR';
            white-space: nowrap;
            z-index: 10;
        }

        .text-container:hover .tooltip {
            display: block;
        }

        .home {
            width: 80px;
            height: auto;
            position: absolute;
            cursor: pointer;
            display: none;
        }

        .home {
            left: 10px;
            top: 10px;
            display: block;
        }

        .home:hover {
            transform: scale(1.2);
        }

        .dandel {
            position: absolute;
            width: 150px;
            height: auto;
            top: 24%;
            left: 40%;
            transition: top 0.3s ease-in-out, left 0.3s ease-in-out;
        }

        .left, .rightimg {
            position: absolute;
            width: 80px;
            height: auto;
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
        }

        .up, .down {
            position: absolute;
            width: auto;
            height: 80px;
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
        }

        .up:hover, .down:hover, .left:hover, .rightimg:hover {
            transform: scale(1.1);
        }

        .up {
            left: 70%;
            top: 60%;
        }

        .down {
            left: 73%;
            top: 60%;
        }

        .left {
            left: 64%;
            top: 63%;
        }

        .rightimg {
            left: 77%;
            top: 63%;
        }

        .cap {
            position: absolute;
            width: 400px;
            height: auto;
            top: 60%;
            left: 30%;
        }

        .fly-button {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            font-family: 'RixXladywatermelonR';
            font-size: 20px;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .fly-button:hover {
            background-color: rgba(85, 85, 85, 0.8);
        }

    </style>
</head>
<body>

    <img src="아이콘_홈.png" class="home" id="homeButton">

    <!-- 이미지 클릭할 수 있게 설정 -->
    <img src="12_up.png" class="up" id="upButton">
    <img src="12_down.png" class="down" id="downButton">
    <img src="12_left.png" class="left" id="leftButton">
    <img src="12_right.png" class="rightimg" id="rightimgButton">
    
    <img src="12_Q_dandel.png" class="dandel" id="dandelButton">
    <img src="12_Q_cap.png" class="cap" id="cap">

    <!-- 날아가기 버튼 -->
    <div class="fly-button" id="flyButton">날아가기</div>

    <div class="text-container" onclick="goToNextScene()">
        <div class="text" id="instructionText">?</div>
        <div class="tooltip">화살표를 클릭해서 모자 위에 착지해보자</div>
    </div>

    <script>
        document.getElementById("homeButton").onclick = function() {
            window.location.href = "home.html";
        };

        const upButton = document.getElementById("upButton");
        const downButton = document.getElementById("downButton");
        const leftButton = document.getElementById("leftButton");
        const rightimgButton = document.getElementById("rightimgButton");
        const dandelButton = document.getElementById("dandelButton");
        const flyButton = document.getElementById("flyButton");

        let moveInterval;

        // dandel 이미지 위치 이동 함수
        function moveDandel(direction) {
            const dandel = document.getElementById("dandelButton");
            const currentTop = parseInt(window.getComputedStyle(dandel).top, 10);
            const currentLeft = parseInt(window.getComputedStyle(dandel).left, 10);

            // direction에 따른 위치 이동 처리
            if (direction === 'up') {
                dandel.style.top = `${currentTop - 10}px`;
            } else if (direction === 'down') {
                dandel.style.top = `${currentTop + 10}px`;
            } else if (direction === 'left') {
                dandel.style.left = `${currentLeft - 10}px`;
            } else if (direction === 'right') {
                dandel.style.left = `${currentLeft + 10}px`;
            }

            // 충돌 감지 후 날아가기 버튼 표시
            checkCollision();
        }

        // 충돌 감지 함수
        function checkCollision() {
            const dandel = document.getElementById("dandelButton");
            const cap = document.getElementById("cap");
            const flyButton = document.getElementById("flyButton");

            const dandelRect = dandel.getBoundingClientRect();
            const capRect = cap.getBoundingClientRect();

            if (dandelRect.bottom >= capRect.top && 
                dandelRect.top <= capRect.bottom && 
                dandelRect.left + dandelRect.width * 0.5 >= capRect.left && 
                dandelRect.left <= capRect.left + capRect.width * 0.5) {
                flyButton.style.display = 'block';  // 충돌하면 "날아가기" 버튼 표시
            } else {
                flyButton.style.display = 'none';  // 충돌하지 않으면 "날아가기" 버튼 숨김
            }
        }

        // 날아가기 버튼 클릭 시 12_1.html로 이동
        flyButton.onclick = function() {
            window.location.href = "12_1.html";
        };

        // 버튼 클릭 시 이동 시작
        upButton.addEventListener("mousedown", function() {
            moveInterval = setInterval(() => {
                moveDandel('up');
            }, 100);  // 100ms 간격으로 이동
        });

        downButton.addEventListener("mousedown", function() {
            moveInterval = setInterval(() => {
                moveDandel('down');
            }, 100);  // 100ms 간격으로 이동
        });

        leftButton.addEventListener("mousedown", function() {
            moveInterval = setInterval(() => {
                moveDandel('left');
            }, 100);  // 100ms 간격으로 이동
        });

        rightimgButton.addEventListener("mousedown", function() {
            moveInterval = setInterval(() => {
                moveDandel('right');
            }, 100);  // 100ms 간격으로 이동
        });

        // 마우스 버튼을 떼면 이동 멈추기
        document.addEventListener("mouseup", function() {
            clearInterval(moveInterval);  // 모든 방향에 대해 이동 멈추기
        });

    </script>
</body>
</html>
